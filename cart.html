<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="assets/style.css" />
  </head>
  <body>
    <header class="sticky-lg-top">
      <nav class="navbar navbar-expand-lg navbar-light b3 fixedtop">
        <div class="container bg-">
          <a href="/" class="navbar-brand">
            <img
              class="navbar-brand"
              src="Screenshot_2024-05-09_215822-removebg-preview (1).png"
              style="height: 70px"
            />
            <!-- Premium-software -->
          </a>
          <button
            class="navbar-toggler border-info"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <!-- <span class="navbar-toggler-icon"></span> -->
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item py-1 px-2">
                <a class="nav-link" aria-current="page" href="/">Home</a>
              </li>
              <li class="nav-item py-1 px-2">
                <a class="nav-link" href="#">About</a>
              </li>

              <li
                class="nav-item border px-lg-2 py-1 px-2 border-2 border-primary d-none d-lg-block"
              >
                <a class="nav-link position-relative" href="#">
                  <!-- <div class="border border-2 border-primary px-2 py-1"> -->
                  <span
                    class="position-absolute top-0 start-100 translate-middle badge rounded-circle bg-primary"
                  >
                    0
                    <!-- <span class="visually-hidden">unread messages</span> -->
                  </span>
                  <i class="fa-solid fa-cart-plus text-primary"></i>
                  <!-- </div> -->
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <section class="">
      <div class="container mt-5">
        <h1>Shopping Cart</h1>
        <div class="row mt-3">
          <div class="col-md-8 prd">
            <!-- <div class="card mb-3">
                <div class="row g-0">
                  <div class="col-md-4">
                    <img
                      src="assets/1-removebg-preview (1).png"
                      alt="Product Image"
                      class="img-fluid"
                    />
                  </div>
                  <div class="col-md-8">
                    <div class="card-body">
                      <h5 class="card-title">Product Name</h5>
                      <p class="card-text">Price: $99.99</p>
                      <p class="card-text">Quantity: 1</p>
                      <p class="card-text">Subtotal: $99.99</p>
                    </div>
                  </div>
                </div>
              </div> -->
            <!-- More product cards can go here -->
          </div>
          <div class="col-md-4">
            <div class="card mb-3">
              <div class="card-body">
                <h5 class="card-title">Cart Total</h5>
                <p class="card-text pretot"></p>
                <div class="input-group mb-3">
                  <input
                    type="text"
                    class="form-control"
                    id="coupon-code"
                    placeholder="Enter coupon code"
                    aria-label="Coupon code"
                    aria-describedby="coupon-btn"
                  />
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="apply-coupon-btn"
                  >
                    Apply
                  </button>
                </div>
                <hr />
                <h5 class="card-text" id="total"></h5>
                <a href="pay.html" class="btn btn-primary mt-3 nextpay"
                  >Proceed to Checkout</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"
    ></script>

    <script>
      const data = JSON.parse(localStorage.getItem("cart"));
      var ttt = 0;

      data.forEach((item) => {
        const d = `
        <div class="card mb-3">
              <div class="row g-0">
                <div class="col-md-4">
                  <img
                    src='${item.img}'
                    alt="Product Image"
                    class="img-fluid"
                  />
                </div>
                <div class="col-md-8">
                  <div class="card-body">
                    <h5 class="card-title">${item.name}</h5>
                    <p class="card-text">Price: ${item.price}</p>
                    <p class="card-text">Quantity:${item.quantity}</p>
                    <p class="card-text">Subtotal:${
                      item.price * item.quantity
                    }</p>
                  </div>
                </div>
              </div>
            </div>
          `;
        document.querySelector(".prd").innerHTML += d;
        // let ttt +=  item.price * item.quantity
        ttt = ttt + item.price * item.quantity;

        // console.log(item.price * item.quantity);
      });

      document.querySelector(".pretot").textContent += `Subtotal:${ttt}`;
      document.querySelector("#total").textContent += `Total:${ttt}`;
      console.log(ttt);

      // console.log(actp);

      document.addEventListener("DOMContentLoaded", function () {
        var newTotal = ttt;
        document
          .getElementById("apply-coupon-btn")
          .addEventListener("click", function () {
            // Get the value of the coupon code input field
            var couponCode = document.getElementById("coupon-code").value;

            // Assume you have a function to calculate the discount based on the coupon code
            var discount = calculateDiscount(couponCode);

            // Assume initial total is $99.99 (replace it with your initial total)
            var initialTotal = ttt;

            // Calculate the new total after applying the discount
            newTotal = initialTotal - discount;

            // Update the displayed total on the page
            document.getElementById("total").textContent =
              "Total: " + newTotal.toFixed(2);
          });

        document
          .querySelector(".nextpay")
          .addEventListener("click", function () {
            console.log(actp.p);
            localStorage.setItem("total", JSON.stringify(newTotal));
          });

        // Function to calculate discount based on the coupon code
        function calculateDiscount(couponCode) {
          // Replace this with your logic to calculate the discount based on the coupon code
          // For demonstration purposes, let's assume a fixed discount amount
          if (couponCode === "SAVE10") {
            return 10; // $10 discount
          } else if (couponCode === "SAVE20") {
            return (20 / 100) * ttt; // $20 discount
          } else {
            return 0; // No discount applied
          }
        }
      });
    </script>
  </body>
</html>
